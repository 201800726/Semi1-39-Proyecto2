<mat-stepper
  class="demo-stepper"
  style="background: none"
  linear="true"
  (selectionChange)="selectionChange($event)"
  labelPosition="bottom"
  #stepper
>
  <mat-step label="" state="edge" completed="true" editable="false"> </mat-step>
  <mat-step label="Publications" state="pubs" [completed]="next">
    <div fxLayout="row" fxLayoutAlign="space-between start">
      <div class="right-side" fxLayout="column" fxLayoutAlign="start">
        <div class="pub" *ngFor="let publication of publications">
          <app-publication [publication]="publication"></app-publication>
        </div>
      </div>
      <div fxFlex class="left-side" fxLayout="column" fxLayoutAlign="start">
        <!-- New publication -->
        <button
          mat-button
          color="accent"
          *ngIf="!create_content"
          (click)="create_content = true"
        >
          Create Content
          <mat-icon class="icon">history_edu</mat-icon>
        </button>
        <div *ngIf="create_content">
          <div fxLayout="row" fxLayoutAlign="space-between">
            <h2><b>New Publication</b></h2>

            <div>
              <button
                mat-icon-button
                type="button"
                color="accent"
                (click)="add_comment = !add_comment"
              >
                <mat-icon class="icon">
                  {{
                    add_comment ? "comments_disabled" : "insert_comment"
                  }}</mat-icon
                >
              </button>

              <button
                mat-icon-button
                type="button"
                color="primary"
                (click)="cancel()"
              >
                <mat-icon class="icon">cancel</mat-icon>
              </button>
            </div>
          </div>
          <button
            mat-button
            color="accent"
            class="full-width"
            (click)="create_content = true"
            (click)="fileUpload.click()"
          >
            Upload Photo
            <mat-icon class="icon">file_upload</mat-icon>
          </button>
          <input
            type="file"
            class="file-input"
            (change)="onFileSelected($event)"
            accept="image/*"
            #fileUpload
          />
          <img
            [src]="
              new_publication.picture ||
              'https://img.ly/blog/content/images/2021/06/crop-image-react-open-source.jpg'
            "
          />
          <mat-form-field
            class="full-width"
            appearance="outline"
            *ngIf="add_comment"
          >
            <mat-label>Leave a comment</mat-label>

            <textarea
              matInput
              placeholder="Ex. It makes me feel..."
              style="height: 30px"
              [(ngModel)]="new_publication.comment"
              name="commentField"
              #commentField="ngModel"
            ></textarea>
          </mat-form-field>
          <div fxLayout="row" fxLayoutAlign="end">
            <button mat-stroked-button color="accent" (click)="publish()">
              publish
            </button>
          </div>
          <p></p>
          <mat-divider></mat-divider>
        </div>

        <!---->

        <app-filter></app-filter>
      </div>
    </div>
  </mat-step>
  <mat-step label="Friends" state="friends" [completed]="!next">
    <p>friends</p>
  </mat-step>
  <mat-step label="" state="edge" completed="true" editable="false"> </mat-step>

  <ng-template matStepperIcon="pubs">
    <mat-icon class="icon">view_quilt</mat-icon>
  </ng-template>
  <ng-template matStepperIcon="friends">
    <mat-icon class="icon">group</mat-icon>
  </ng-template>
  <ng-template matStepperIcon="edit">
    <mat-icon class="icon">star</mat-icon>
  </ng-template>
  <ng-template matStepperIcon="edge">
    <mat-icon class="icon">spoke</mat-icon>
  </ng-template>
  <ng-template matStepperIcon="done">
    <mat-icon class="icon">spoke</mat-icon>
  </ng-template>
</mat-stepper>
